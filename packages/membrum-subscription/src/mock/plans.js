import cuid from 'cuid';
import db from '../database';

const database = db({ TableName: 'MembrumPlans' });

export const generatePlans = async (ownerId, dbPlans) => {
  const plans = [
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Please choose a plan',
      labels: [],
      group: [],
      type: 'default',
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Teknologkåren',
      amount: 0,

      interval: 'month',
      intervalCount: 6,
      labels: ['union'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Lunda Ekonomerna',
      amount: 100,
      interval: 'month',
      intervalCount: 6,
      labels: ['union'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Samhällsvetarkåren',
      amount: 110,
      interval: 'month',
      intervalCount: 6,
      labels: ['union'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Lunds Naturvetarkår',
      amount: 120,
      interval: 'month',
      intervalCount: 6,
      labels: ['union'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Blekingska Nationen',
      amount: 210,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'gudrun'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Göteborgs Nation',
      amount: 200,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'city'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Hallands Nation',
      amount: 200,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'city'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Helsingkrona Nation',
      amount: 200,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'torna'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Kalmar Nation',
      amount: 200,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'gudrun'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Kristianstads Nation',
      amount: 200,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'torna'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Lunds Nation',
      amount: 200,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'city'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Malmö Nation',
      amount: 200,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'city'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Östgöta Nation',
      amount: 200,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'city'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Sydskånska Nation',
      amount: 200,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'torna'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Västgöta Nation',
      amount: 200,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'torna'],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Wermlands Nation',
      amount: 210,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation', 'gudrun'],
      group: ['studentlund'],
      type: 'plan',
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Undefined Nation',
      amount: 80,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation'],
      group: ['studentlund'],
      type: 'trail',
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Terminsräkningsföreningen',
      amount: 20,
      interval: 'month',
      intervalCount: 6,
      labels: [],
      group: ['obligatory'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Akademiska Föreningen',
      amount: 100,
      interval: 'month',
      intervalCount: 6,
      labels: [],
      group: ['studentlund'],
    },
    {
      id: cuid(),
      organisationId: ownerId,
      name: 'Smålands Nation',
      amount: 200,
      interval: 'month',
      intervalCount: 6,
      labels: ['nation'],
      group: ['Smalands'],
    },
  ];

  await asyncForEach(plans, plan => database.create(plan));
  console.log('Plans created');
};

async function asyncForEach(array, callback) {
  for (let index = 0; index < array.length; index++) {
    await callback(array[index], index, array);
  }
}
